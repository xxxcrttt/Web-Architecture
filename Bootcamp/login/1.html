<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="'viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <title>User login</title>
    <link rel="stylesheet" href="../1.css">
    <script src="../jquery-3.6.1.min.js"></script>
</head>

<body>
    <div class="container">
        <h1>app name</h1>
        <form action="">
            <input type="text" class="tbx" placeholder="Account">
            <input type="password" class="tbx" placeholder="Password">
            <input type="submit" class="sub" value="login"> 
        </form>
    </div>
    <script>
        // 定义一个con绑定 .container
        const con=document.querySelector('.container');
        // 定义两个函数开关
        let isIn=true;
        let isOut=false;

        var span; // 未出现的元素名字 span

        // 添加监听
        con.addEventListener('mouseenter',(e)=>{
            // 若是打开的直接执行函数
            if(isIn){
                // 获取进入的鼠标位置，生成元素位置 = 进入点距离窗口的距离 - 父盒
                let inX=e.clientX-e.target.offsetLeft;
                let inY=e.clientY-e.target.offsetTop;
                
                // 创建span元素，并给它对应的坐标 
                let el=document.createElement('span');
                el.style.left=inX+'px';
                el.style.top=inY+'px';

                // 添加到con 对应的父元素
                con.appendChild(el);

                $('.container span').removeClass('out');    // 移除出去的动画
                $('.container span').addClass('in');
                span=document.querySelector('.container span');
                isIn=false;
                isOut=true;
            }
        })

        con.addEventListener('mouseleave',(e)=>{
            if(isOut){
                // 获取进入的鼠标位置，生成元素位置 = 进入点距离窗口的距离 - 父盒
                let outX=e.clientX-e.target.offsetLeft;
                let outY=e.clientY-e.target.offsetTop;

                $('.container span').removeClass('in'); 
                $('.container span').addClass('out');     
                $('.out').css('left',outX+'px');
                $('.out').css('top',outY+'px');

                isOut=false;
                // 当动画结束后删除元素
                setTimeout(() => {
                    con.removeChild(span);
                    isIn=true;
                }, 500); 
            }
        })
    </script>

</body>

</html>